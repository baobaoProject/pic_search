FROM nvcr.io/nvidia/tensorflow:25.02-tf2-py3

WORKDIR /app/src
ENV TF_XLA_FLAGS=--tf_xla_cpu_global_jit
COPY ./requirements.txt /app/requirements.txt
RUN mkdir -p /root/.keras/models

RUN pip install --no-cache-dir -r /app/requirements.txt -i https://mirrors.aliyun.com/pypi/simple --trusted-host mirrors.aliyun.com

COPY ./src /app/src

CMD ["python", "app.py"]
# docker build   -t   tensorflow/webserver:nvidia-25.02-tf2-py3-gpu -f ./DockerfileGPU  .